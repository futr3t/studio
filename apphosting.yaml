# Specifies the version of the App Hosting schema.
version: 1

# Defines the settings for the App Hosting backend.
runConfig:
  # For cost-saving on low-traffic apps, minInstances can be 0.
  # App Hosting will scale to 0 when there's no traffic.
  minInstances: 0
  # Specifies the CPU resources allocated to each instance.
  # 1 CPU is a common default for Next.js.
  cpu: 1
  # Specifies the memory allocated to each instance.
  # 512MiB is often sufficient for many Next.js apps.
  memoryMiB: 512
  # Concurrency can be adjusted based on app behavior.
  concurrency: 80

# Defines the build settings for your application.
buildConfig:
  # Uses the standard Next.js build command from your package.json.
  buildCommand: npm run build
  # Uses the standard Next.js start command from your package.json.
  # Next.js automatically respects the PORT environment variable provided by App Hosting.
  startCommand: npm run start

# Environment variables should be configured in the Firebase console for security,
# especially for secrets.
# Example:
# env:
#   - variableName: "API_KEY"
#     value: "your_api_key_value_here" # Or use Firebase Secret Manager
#   - variableName: "NODE_ENV"
#     value: "production"

# Headers, redirects, and rewrites can be configured here if needed,
# but Next.js handles many of these concerns internally.
# For example, API routes are handled by Next.js.
# headers:
#   - path: "/**"
#     headers:
#       - key: "Cache-Control"
#         value: "public, max-age=0, must-revalidate" # Example for dynamic content
#       - key: "X-Content-Type-Options"
#         value: "nosniff"
#   - path: "/_next/static/**"
#     headers:
#       - key: "Cache-Control"
#         value: "public, max-age=31536000, immutable" # Example for static assets
